
# LOG COMPLETO — Sessione di Debug, Validazione e Parameter Sweeps (Simulatore PMCSN ASF)

## Data
Sessione odierna — recap completo di ciò che è stato fatto.

# 1. Validazione della Legge di Little con il Nuovo Workflow (DEV + REVIEW + TESTING)

Dopo l’applicazione dei Codex prompt che hanno trasformato il workflow (backlog come coda DEV, tre fasi distinte), è stata eseguita la simulazione aggiornata. Abbiamo verificato la coerenza della Legge di Little per ogni fase.

## 1.1 DEV (Backlog) — Conformità perfetta
- avg_queue_length_backlog = 0.009956
- throughput_dev = 0.109589 / giorno
- avg_wait_dev = 0.090186 giorni

Calcolo teorico: Lq = λ Wq = 0.109589 * 0.090186 = 0.00988  
Simulazione: 0.009956  
→ Deviazione < 1%

## 1.2 REVIEW — Deviazioni attese
Deviazioni ~15%, normali per bassi volumi, feedback loops e orizzonte finito.

## 1.3 TESTING — Deviazioni attese
Deviazioni ~20%, normali per la stessa ragione dello stadio REVIEW.

# 2. Analisi del Meccanismo di Parameter Sweep

Analizzato in dettaglio `simulation/run_sweeps.py` e `simulation/config.py`.

## 2.1 Funzionamento
1. Carica CSV degli esperimenti
2. Applica override ai parametri
3. Ricarica moduli per far valere le nuove config
4. Esegue la simulazione
5. Salva output in `experiments/<id>`
6. Crea aggregate_summary.csv

## 2.2 Perché serve
- Analisi multi-scenario obbligatoria per 5.2B
- Riproducibilità totale delle simulazioni
- Base dati per validazione (step 5.2C)
- Essenziale per studiare sensibilità del sistema e Markov developer policy

# 3. Problema Critico #1 — tickets_stats.csv mostra solo 1 ticket

Il file dovrebbe contenere una riga per ogni ticket processato.  
Con 365 giorni e λ > 0, il numero di ticket dovrebbe essere > 1.  
Il fatto che tickets_stats.csv contenga solo 1 riga significa:

→ **BUG nel codice**, non nel sweep runner.

Possibili cause:
- Sovrascrittura di ticket_stats
- Reset accidentale dello StatsCollector
- Loop di scrittura alterato
- Riferimenti obsoleti a `dev_review` che rompono tracking

# 4. Problema Critico #2 — SERVICE_TIME_PARAMS obsoleto

`SERVICE_TIME_PARAMS` usa ancora:
- dev_review
- testing

mentre il workflow corretto richiede:
- dev
- review
- testing

Questo crea:
- errori nel sampling dei tempi
- incoerenza tra workflow e stats
- possibili reset dei ticket
- simulazione concettualmente errata

È **prioritario** correggerlo.

# 5. Stato del Meeting 5 — Step 5.2B

Step 5.2B è logicamente completo:
- sweep runner documentato
- CSV definito
- analisi pronta
- Markov policy integrata

MA i risultati non sono ancora validi finché non si sistemano i due bug critici:
1. SERVICE_TIME_PARAMS
2. tickets_stats.csv incompleto

# 6. Next Week — Piano Operativo Dettagliato

## 6.1 Fix SERVICE_TIME_PARAMS
- Applicare Codex prompt generato
- Creare chiavi dev, review, testing
- Aggiornare developer_policy, workflow_logic, entities e stats
- Rimuovere ogni residuo di dev_review

## 6.2 Fix tickets_stats.csv
- Analizzare StatsCollector
- Controllare tracking dei ticket
- Correggere eventuali reset
- Verificare update delle metriche DEV/REVIEW/TESTING

## 6.3 Eseguire una singola simulazione
Verificare:
- tickets_arrived == numero righe in tickets_stats.csv
- code e tempi coerenti
- backlog = coda DEV

## 6.4 Rilanciare sweeps
Verificare:
- corretta generazione di tickets_stats.csv per ogni esperimento
- aggregate_summary coerente

## 6.5 Completare Step 5.2C
Dopo i fix:
- scrivere docs/validation.md
- confronti empirici
- grafici
- commenti di stabilità

# 7. Riassunto Finale

**Completato:**
- Validazione Little’s Law per DEV
- Analisi completa sweep runner
- Diagnosi bug tickets_stats.csv
- Identificazione problema SERVICE_TIME_PARAMS
- Generati Codex prompt per fix
- Completato concettualmente Step 5.2B
- Creato documento esplicativo Little’s Law

**Da fare:**
- Fix SERVICE_TIME_PARAMS
- Fix tickets_stats.csv
- Rilanciare simulazioni
- Completare 5.2C
